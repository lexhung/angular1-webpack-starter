webpackJsonp([2],{13:function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),LoginFormController=function(){function LoginFormController(UserAPI,$state){_classCallCheck(this,LoginFormController),Object.assign(this,{UserAPI:UserAPI,$state:$state})}return _createClass(LoginFormController,[{key:"login",value:function(credential){function _success(){self.$state.prev?(self.$state.go(self.$state.prev.state,self.$state.prev.params),self.$state.prev=null):self.$state.go(self.routeAfterLogin)}function _error(message){self._setError("error",message.text),self.isRequest=!1}var self=this;this.loginForm.$invalid||(this.loginError=null,this.isRequest=!0,this.UserAPI.login(credential.email,credential.password).then(_success).catch(_error))}},{key:"_setError",value:function(type,text){this.loginError={type:type,text:text}}}]),LoginFormController}();LoginFormController.$inject=["UserAPI","$state"],exports.default=LoginFormController,module.exports=exports.default},56:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _angular=__webpack_require__(1),_angular2=_interopRequireDefault(_angular),_loginFormController=__webpack_require__(13),_loginFormController2=_interopRequireDefault(_loginFormController),_loginFormDirective=__webpack_require__(57),_loginFormDirective2=_interopRequireDefault(_loginFormDirective),loginForm=_angular2.default.module("app.components.loginForm",[]).controller(_loginFormController2.default.name,_loginFormController2.default).directive("aioLoginForm",_loginFormDirective2.default);exports.default=loginForm,module.exports=exports.default},57:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function LoginFormDirective(){return{restrict:"AE",scope:{},controller:_loginFormController2.default.name,controllerAs:"form",bindToController:{needCheckLogin:"=",userInfo:"=",routeAfterLogin:"@",loginError:"="},template:_loginFormJade2.default}}Object.defineProperty(exports,"__esModule",{value:!0});var _loginFormJade=__webpack_require__(138),_loginFormJade2=_interopRequireDefault(_loginFormJade),_loginFormController=__webpack_require__(13),_loginFormController2=_interopRequireDefault(_loginFormController);exports.default=LoginFormDirective,module.exports=exports.default},76:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _angular=__webpack_require__(1),_angular2=_interopRequireDefault(_angular),_componentsLoginForm=__webpack_require__(56),_componentsLoginForm2=_interopRequireDefault(_componentsLoginForm),_loginController=__webpack_require__(77),_loginController2=_interopRequireDefault(_loginController);exports.default=_angular2.default.module("app.pages.login",[_componentsLoginForm2.default.name]).controller(_loginController2.default.name,_loginController2.default),module.exports=exports.default},77:function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var LoginController=function LoginController(UserAPI,$state,$timeout){var _this=this;_classCallCheck(this,LoginController),Object.assign(this,{UserAPI:UserAPI,$state:$state,$timeout:$timeout}),this.routeAfterLogin="root.layout.dashboard";var action=this.$state.params.action;"logout"===action?(this.needCheckLogin=!1,this.UserAPI.logout().then(function(){_this.loginError={type:"success",text:"You have been successfully logged out!"}})):!function(){_this.userInfo=null,_this.needCheckLogin=!0;var self=_this;_this.UserAPI.checkLoggedInStatus().then(function(data){self.userInfo=data,self.$timeout(function(){self.$state.go(self.routeAfterLogin)},1e3)}).catch(function(){self.needCheckLogin=!1})}()};LoginController.$inject=["UserAPI","$state","$timeout"],exports.default=LoginController,module.exports=exports.default},119:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"assets/style/login-form.styl?8eb0c0f05defeb2ae4340a0de5ee27c9"},128:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"assets/style/login.styl?9cd3c9d0f05df8b0b83356cf7754357d"},138:function(module,exports,__webpack_require__){__webpack_require__(2);module.exports=function(locals){var buf=[];return __webpack_require__(119),buf.push('<div class="login-form-view"><div ng-if="form.needCheckLogin" class="login-checking white-text"><i ng-class="{\'mdi-notification-sync icon-rotate-animation\': !form.userInfo, \'mdi-action-account-box\': form.userInfo}" class="medium"></i><p class="loading-text">{{form.userInfo ? form.userInfo.name : \'Checking Login User...\'}}</p></div><form name="form.loginForm" ng-submit="form.login(form.credential)" novalidate="novalidate" autocomplete="off" class="card"><div class="card-title black-text p2">Please sign in with your Email and Password</div><div ng-if="form.loginError" class="login-message p1 {{form.loginError.type}}"><p class="white-text">{{form.loginError.text}}</p></div><div class="card-content p3"><div class="input-field"><i class="mdi-communication-email prefix"></i><input name="email" type="email" ng-model="form.credential.email" required="required" aio-focus-me="true"/><label for="email">Email</label></div><div class="input-field"><i class="mdi-communication-vpn-key prefix"></i><input name="password" type="password" ng-model="form.credential.password" required="required"/><label for="password">Password</label></div></div><div class="card-actions center-align p2"><button type="submit" ng-disabled="form.loginForm.$invalid || form.isRequest" ng-class="{\'disabled\': form.loginForm.$invalid || form.isRequest}" aio-loading-button="form.isRequest" class="btn btn-large blue waves-effect waves-light btn-login">Sign In</button></div></form></div>'),buf.join("")}},147:function(module,exports,__webpack_require__){__webpack_require__(2);module.exports=function(locals){var buf=[];return __webpack_require__(128),buf.push('<div class="login-view"><aio-login-form need-check-login="vm.needCheckLogin" user-info="vm.userInfo" route-after-login="{{vm.routeAfterLogin}}" login-error="vm.loginError"></aio-login-form></div>'),buf.join("")}}});
//# sourceMappingURL=login.4acb84a57fbf638021e5.chunk.js.map